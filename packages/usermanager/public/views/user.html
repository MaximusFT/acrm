<section data-ng-controller="UserController">
	<h1>User information</h1>
    <div class="loader" data-ng-init="init()" data-ng-hide="users.length"></div>
    <table class="table table-striped table-bordered table-hover editable-table" data-ng-show="users.length">
        <tr>
            <th data-ng-repeat="field in userSchema" data-ng-if="field.inTable">{{field.title}}</th>
        </tr>
        <tr data-ng-repeat="user in users">
            <td class="table-editable-cell" data-ng-repeat="field in userSchema" data-ng-if="field.inTable && user['username'] === userId">
                <div data-ng-if="mode === 'Administrator'">
					<span data-ng-click="beforeSelect(field['schemaKey'], user)" data-ng-if="(field['type'] == 'text')" class="editable-span" data-ng-editable="update(user, field['schemaKey'])" data-ng-editable-model="user[field['schemaKey']]"></span>
					<span data-ng-click="beforeSelect(field['schemaKey'], user)" data-ng-if="(field['type'] == 'select')" class="editable-span" data-ng-editable-select="update(user, field['schemaKey'])" data-ng-editable-select-model="user[field['schemaKey']]" data-ng-editable-select-options="field['options']"></span>
				</div>
				<div data-ng-if="mode === 'Manager'">
					<span data-ng-click="beforeSelect(field['schemaKey'], user)" data-ng-if="(field['type'] == 'text')" class="editable-span" data-ng-editable="update(user, field['schemaKey'])" data-ng-editable-model="user[field['schemaKey']]"></span>
					<span data-ng-click="beforeSelect(field['schemaKey'], user)" data-ng-if="(field['type'] == 'select' && field['schemaKey'] === 'roles')" class="editable-span" data-ng-editable-select="update(user, field['schemaKey'])" data-ng-editable-select-model="user[field['schemaKey']]" data-ng-editable-select-options="field['options']"></span>
					<span data-ng-if="(field['type'] == 'select' && field['schemaKey'] === 'department')">{{user[field['schemaKey']]}}</span>
				</div>
				<div data-ng-if="mode === 'Employeer'">
					<span>{{user[field['schemaKey']]}}</span>
				</div>
            </td>
        </tr>
    </table>	
	<div class="loader" data-ng-init="p_init()" data-ng-hide="groups.length"></div>
	<h1>Accessible passwords</h1>
	<div data-ng-repeat="group in groups">
	<h3 data-ng-show="group.passes.length">{{$index+1}}. {{group.group}} ({{group.passes.length}})</h3>
    <table class="table table-striped table-bordered table-hover editable-table" data-ng-show="group.passes.length">
        <tr>
			<th>
				#
			</th>
            <th data-ng-repeat="field in passSchema" data-ng-if="field.inTable">{{field.title}}</th>
        </tr>
        <tr data-ng-repeat="pass in group.passes | filter:search:strict">
			<td>
				<a href="#!/manager/passwords/{{pass['_id']}}">#</a>
			</td>
            <td data-ng-repeat="field in passSchema" data-ng-if="field.inTable">
                <span data-ng-if="pass[field['schemaKey']] == ''">---</span>
				<span data-ng-if="pass[field['schemaKey']] != ''">{{pass[field['schemaKey']]}}</span>
            </td>
        </tr>
    </table>
	</div>
	<div data-ng-hide="group.passes.length">
		<p class='bg-warning'>You have not access for any password account.</p>
	</div>
</section>