<!-- START CONTENT FRAME TOP -->
<div class="content-frame-top">                        
    <div class="page-title">                    
        <h2><span class="fa fa-arrow-circle-o-left"></span> User Manager - Administrator</h2>
    </div>                                      
    <div class="pull-right">
        <button class="btn btn-default content-frame-left-toggle"><span class="fa fa-bars"></span></button>
    </div>                        
</div>
<!-- END CONTENT FRAME TOP -->

<!-- START CONTENT FRAME LEFT -->
<div class="content-frame-left content-frame-fixed">
    
    <div class="panel panel-default">
        <div class="panel-heading">Control panel</div>
        <div class="panel-body">
            <div class="form-group">
                <input class="form-control" type="text" placeholder="Search" ng-model="search">
            </div>
            <hr>
            <div class="btn-group-vertical btn-block" role="group">
                <div class="btn-group dropup" role="group">
                    <a class="btn btn-warning btn-block dropdown-toggle" data-toggle="dropdown" data-ng-disabled="isSomeSelected">Assign role <span class="caret"></span></a>
                    <ul class="dropdown-menu" data-ng-hide="isSomeSelected">
                        <li data-ng-click="assignRole(1)"><a href="">Administrator</a></li>
                        <li data-ng-click="assignRole(2)"><a href="">Manager</a></li>
                        <li data-ng-click="assignRole(3)"><a href="">Employee</a></li>
                    </ul>
                </div>
                <a class="btn btn-info" data-ng-disabled="isSomeSelected" data-ng-click="bind2dep()">Bind to the department</a>
                <a class="btn btn-primary" data-ng-disabled="isSomeSelected" data-ng-click="clearAccesses()">Clear accesses</a>
                <a class="btn btn-danger" data-ng-disabled="isSomeSelected" data-ng-click="remove()">Remove</a>
            </div>
        </div>
    </div>

</div>
<!-- END CONTENT FRAME LEFT -->

<!-- START CONTENT FRAME BODY -->
<div class="content-frame-body">
    
    <div class="loader" data-ng-init="init()" data-ng-hide="departments.length"></div>
    
    <div class="panel panel-default tabs">                            
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#tab-first" role="tab" data-toggle="tab">Users</a></li>
            <li><a href="#tab-second" role="tab" data-toggle="tab">Adding new users</a></li>
            <li><a href="#tab-third" role="tab" data-toggle="tab">test</a></li>
        </ul>
        <div class="panel-body tab-content">
            <div class="tab-pane active" id="tab-first">
                <div cg-busy="{promise:getHttp1,message:'Loading. Please wait...',backdrop:false,delay:300,minDuration:700}">
                    <div data-ng-repeat="department in departments" data-ng-init="sectionIndex=$index">
                        <h2 data-ng-show="department.users.length">{{department.department}}</h2>
                        <table class="table table-striped table-bordered table-hover editable-table" data-ng-show="department.users.length">
                            <tr>
                                <th><i class="glyphicon glyphicon-sort-by-order"></i></th>
                                <th><i class="glyphicon glyphicon-ok" data-ng-click="selectAll(sectionIndex)"></i></th>
                                <th data-ng-repeat="field in userSchema" data-ng-if="field.inTable">{{field.title}}</th>
                                <th>Role</th>
                            </tr>
                            <tr data-ng-repeat="user in department.users | filter:search:strict">
                                <td>
                                    <a href="#!/manager/users/{{user['username']}}">{{$index+1}}</a>
                                </td>
                                <td>
                                    <input type="checkbox" data-ng-model="user.Selected" data-ng-click="checkUser(sectionIndex, $index, user)">
                                </td>
                                <td class="table-editable-cell" data-ng-repeat="field in userSchema" data-ng-if="field.inTable">
                                    <span data-ng-click="beforeSelect(field['schemaKey'], user)" class="editable-span" data-ng-editable="update(user, field['schemaKey'])" data-ng-editable-model="user[field['schemaKey']]"></span>
                                </td>
                                <td style="text-align:center;font-weight:bold;">{{user.roles}}</td>
                            </tr>
                        </table>
                    </div>
                </div>                
            </div>
            <div class="tab-pane" id="tab-second">
                <h3 class="push-up-0">Adding new users</h3>
                <form id="pass-add-form" class="" name="addUserForm" data-ng-submit="add()">
                    <div class="form-group" data-ng-repeat="field in userSchema">
                        <input class="form-control"
                            type="{{field['type']}}" 
                            data-ng-if="(field['type'] == 'text' || field['type'] == 'password')" 
                            data-ng-model="user[field['schemaKey']]"
                            placeholder="{{field['title']}}"
                            id="user-add-title" />
                        <select class="form-control"
                            data-ng-if="field['type'] == 'select'"
                            data-ng-model="user[field['schemaKey']]"
                            ng-multiple="true"
                            ng-options="option for option in field['options']"
                            multiple >
                            <option value="">-- Choose Role --</option>
                        </select>
                    </div>
                    <input type="submit" class="btn btn-success btn-block" value="Add" />
                </form>
            </div>                                        
            <div class="tab-pane" id="tab-third"> test </div>
        </div>
    </div>

</div>
<!-- END CONTENT FRAME BODY -->